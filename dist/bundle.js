(()=>{"use strict";var t={736:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StatusMessageBuilderTilda=e.WhatsAppRequestBuilder=e.TelegramRequestBuilder=void 0,e.TelegramRequestBuilder=class{constructor(t,e){this.messageExtractor=t,this.studentExtractor=e}build(){return{chat_id:this.studentExtractor.extract().phone,text:this.messageExtractor.extract().message}}},e.WhatsAppRequestBuilder=class{constructor(t,e,s){this.messageExtractor=t,this.studentExtractor=e,this.channelId=s}build(){return{channelId:this.channelId,chatId:this.studentExtractor.extract().phone,chatType:"whatsapp",text:this.messageExtractor.extract().message}}},e.StatusMessageBuilderTilda=class{constructor(t){this.managerExtractor=t}build(){switch(this.managerExtractor.extract().student.status){case"1-й недозвон":return this.buildFirstNonAnsweredCallMessage();case"Дозвон.НаУрок":return this.buildLessonCallMessage();case"Дозвон.БезУрока":return this.buildNoLessonCallMessage();case"Ожидаем отета. 1 День":return this.buildWaitingForResponseMessage();case"Проведено":return this.buildLessonDoneMessage();default:return this.buildDefaultMessage()}}buildFirstNonAnsweredCallMessage(){return`Привет, ${this.managerExtractor.extract().student.name}! Только что вам звонил менеджер по поводу пробного экзамена. Перезвоните ему пожалуйста или напишите в ВА или ТГ.\nИмя менеджера: ${this.managerExtractor.extract().manager.name}\nНомер телефона: ${this.managerExtractor.extract().manager.phone}\nХорошо?)`}buildLessonCallMessage(){return`Ещё раз привет, ${this.managerExtractor.extract().student.name}! Это бот Импульса:)\nЛови инструкцию по прохождению пробника: https://clck.ru/36JSkc\n\nВ течение дня тебе позвонят по поводу бесплатного вводного занятия, будь на связи)\nУдачи на пробнике и хорошего дня 😊\nПодскажи, может у тебя есть какие-то вопросы?`}buildNoLessonCallMessage(){return"Ещё раз привет! Это бот Импульса:)\nЛови инструкцию по прохождению пробника: https://clck.ru/36JSkc\n\nЕсли вдруг надумаешь пройти бесплатное занятие и разобрать любую тему из экзамена (по любому предмету) – переходи по ссылке и записывайся на занятие:\n https://impulsschool.ru/\nМы подберём тебе эксперта!\nУдачи на пробнике и хорошего дня 😊\nПодскажи, может у тебя есть какие-то вопросы?"}buildWaitingForResponseMessage(){return`Привет! Только что вам звонил менеджер по поводу вводного занятия. Перезвоните ему пожалуйста или напишите в ВА или ТГ.\nИмя менеджера: ${this.managerExtractor.extract().manager.name}\nНомер телефона: ${this.managerExtractor.extract().manager.phone}\nХорошо?)`}buildLessonDoneMessage(){return"Привет! Очень надеемся, что вам понравилось занятие. Будем очень рады, если вы в ответном сообщении оцените урок от 1 до 10, где 10 – это невероятно круто)"}buildDefaultMessage(){const t=this.managerExtractor.extract().student.name,e=this.managerExtractor.extract().manager.name,s=this.managerExtractor.extract().manager.phone;return`Привет, ${t}! Мы записали тебя на занятие, которое пройдет ${this.managerExtractor.extract().student.status}. Хорошего урока :)\nИмя твоего менеджера: ${e}\nНомер телефона: ${s}\nДля подтверждения напиши мне что-угодно в ответном сообщении)`}}},879:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MessageForTildaExtractor=e.MessageForEgeExtractor=e.ManagerExtractor=e.StudentExtractor=void 0,e.StudentExtractor=class{constructor(t){this.student=t}extract(){return this.student}},e.ManagerExtractor=class{constructor(t,e){this.studentExtractor=t,this.manager=e}extract(){return{student:this.studentExtractor.extract(),manager:this.manager}}},e.MessageForEgeExtractor=class{constructor(t){this.managerExtractor=t}extract(){let t="";switch(this.managerExtractor.extract().student.status){case"1-й недозвон":t=this.buildFirstNonAnsweredCallMessage();break;case"Дозвон.НаУрок":t=this.buildLessonCallMessage();break;case"Дозвон.БезУрока":t=this.buildNoLessonCallMessage()}return{message:t}}buildFirstNonAnsweredCallMessage(){const{student:t,manager:e}=this.managerExtractor.extract();return`Привет, ${t.name}! Только что вам звонил менеджер по поводу пробного экзамена. Перезвоните ему пожалуйста или напишите в ВА или ТГ.\nИмя менеджера: ${e.name}\nНомер телефона: ${e.phone}\nХорошо?)`}buildLessonCallMessage(){const{student:t}=this.managerExtractor.extract();return`Ещё раз привет, ${t.name}! Это бот Импульса:)\nЛови инструкцию по прохождению пробника: https://clck.ru/36JSkc\n\nВ течение дня тебе позвонят по поводу бесплатного вводного занятия, будь на связи)\nУдачи на пробнике и хорошего дня 😊\nПодскажи, может у тебя есть какие-то вопросы?`}buildNoLessonCallMessage(){return"Ещё раз привет! Это бот Импульса:)\nЛови инструкцию по прохождению пробника: https://clck.ru/36JSkc\n\nЕсли вдруг надумаешь пройти бесплатное занятие и разобрать любую тему из экзамена (по любому предмету) – переходи по ссылке и записывайся на занятие:\n https://impulsschool.ru/\nМы подберём тебе эксперта!\nУдачи на пробнике и хорошего дня 😊\nПодскажи, может у тебя есть какие-то вопросы?"}},e.MessageForTildaExtractor=class{constructor(t){this.managerExtractor=t}extract(){let t="";switch(this.managerExtractor.extract().student.status){case"1-й недозвон":t=this.buildFirstNonAnsweredCallMessage();break;case"Ожидаем отета. 1 День":t=this.buildWaitingForResponseMessage();break;case"Проведено":t=this.buildLessonDoneMessage();break;default:t=this.buildDefaultMessage()}return{message:t}}buildFirstNonAnsweredCallMessage(){const{student:t,manager:e}=this.managerExtractor.extract();return`Привет, ${t.name}! Только что вам звонил менеджер по поводу пробного экзамена. Перезвоните ему пожалуйста или напишите в ВА или ТГ.\nИмя менеджера: ${e.name}\nНомер телефона: ${e.phone}\nХорошо?)`}buildWaitingForResponseMessage(){const{manager:t}=this.managerExtractor.extract();return`Привет! Только что вам звонил менеджер по поводу вводного занятия. Перезвоните ему пожалуйста или напишите в ВА или ТГ.\nИмя менеджера: ${t.name}\nНомер телефона: ${t.phone}\nХорошо?)`}buildLessonDoneMessage(){return"Привет! Очень надеемся, что вам понравилось занятие. Будем очень рады, если вы в ответном сообщении оцените урок от 1 до 10, где 10 – это невероятно круто)"}buildDefaultMessage(){const{student:t,manager:e}=this.managerExtractor.extract();return`Привет, ${t.name}! Мы записали тебя на занятие, которое пройдет ${t.status}. Хорошего урока :)\nИмя твоего менеджера: ${e.name}\nНомер телефона: ${e.phone}\nДля подтверждения напиши мне что-угодно в ответном сообщении)`}}},547:function(t,e){var s=this&&this.__awaiter||function(t,e,s,r){return new(s||(s=Promise))((function(a,n){function c(t){try{i(r.next(t))}catch(t){n(t)}}function o(t){try{i(r.throw(t))}catch(t){n(t)}}function i(t){var e;t.done?a(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(c,o)}i((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.Messenger=void 0,e.Messenger=class{send(t,e){return s(this,void 0,void 0,(function*(){try{const s=yield fetch(t,e),r=yield s.json();console.log(r)}catch(t){console.error("Произошла ошибка при отправке сообщения:",t)}}))}sendSync(t,e){UrlFetchApp.fetch(t,e)}}},825:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ManagerRepository=void 0,e.ManagerRepository=class{constructor(t){this.managers=t}getByNick(t){let e=this.managers.find((e=>e.tgNick===t));return null==e?{name:"UNDEFINED",tgNick:"@UNDEFINED",phone:"UNDEFINED"}:e}}}},e={};function s(r){var a=e[r];if(void 0!==a)return a.exports;var n=e[r]={exports:{}};return t[r].call(n.exports,n,n.exports,s),n.exports}s(547),s(736),s(879),s(825)})();